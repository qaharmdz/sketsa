/*! UIkit 3.17.11 | https://www.getuikit.com | (c) 2014 - 2024 YOOtheme | MIT License */(function(s,g){typeof exports=="object"&&typeof module<"u"?module.exports=g(require("uikit-util")):typeof define=="function"&&define.amd?define("uikitsortable",["uikit-util"],g):(s=typeof globalThis<"u"?globalThis:s||self,s.UIkitSortable=g(s.UIkit.util))})(this,function(s){"use strict";function g(o,e="update"){o._connected&&o._updates.length&&(o._queued||(o._queued=new Set,s.fastdom.read(()=>{o._connected&&R(o,o._queued),delete o._queued})),o._queued.add(e.type||e))}function R(o,e){for(const{read:n,write:t,events:c=[]}of o._updates){if(!e.has("update")&&!c.some(r=>e.has(r)))continue;let a;n&&(a=n.call(o,o._data,e),a&&s.isPlainObject(a)&&s.assign(o._data,a)),t&&a!==!1&&s.fastdom.write(()=>{o._connected&&t.call(o,o._data,e)})}}function B(o){return y(s.observeResize,o,"resize")}function N(o){return y(s.observeMutation,o)}function y(o,e,n){return{observe:o,handler(){g(this,n)},...e}}N({options:{childList:!0,attributes:!0,attributeFilter:["style"]}}),B({target:({$el:o})=>[o,...s.children(o)]});function C(o){const e=[[]],n=o.some((t,c)=>c&&o[c-1].offsetParent!==t.offsetParent);for(const t of o){if(!s.isVisible(t))continue;const c=b(t,n);for(let a=e.length-1;a>=0;a--){const r=e[a];if(!r[0]){r.push(t);break}const h=b(r[0],n);if(c.top>=h.bottom-1&&c.top!==h.top){e.push([t]);break}if(c.bottom-1>h.top||c.top===h.top){let d=r.length-1;for(;d>=0;d--){const p=b(r[d],n);if(c.left>=p.left)break}r.splice(d+1,0,t);break}if(a===0){e.unshift([t]);break}}}return e}function b(o,e=!1){let{offsetTop:n,offsetLeft:t,offsetHeight:c,offsetWidth:a}=o;return e&&([n,t]=s.offsetPosition(o)),{top:n,left:t,bottom:n+c,right:t+a}}const v="uk-transition-leave",w="uk-transition-enter";function P(o,e,n,t=0){const c=u(e,!0),a={opacity:1},r={opacity:0},h=l=>()=>c===u(e)?l():Promise.reject(),d=h(async()=>{s.addClass(e,v),await Promise.all(S(e).map((l,i)=>new Promise(f=>setTimeout(()=>s.Transition.start(l,r,n/2,"ease").then(f),i*t)))),s.removeClass(e,v)}),p=h(async()=>{const l=s.height(e);s.addClass(e,w),o(),s.css(s.children(e),{opacity:0}),await z();const i=s.children(e),f=s.height(e);s.css(e,"alignContent","flex-start"),s.height(e,l);const m=S(e);s.css(i,r);const _=m.map(async(Q,X)=>{await q(X*t),await s.Transition.start(Q,a,n/2,"ease")});l!==f&&_.push(s.Transition.start(e,{height:f},n/2+m.length*t,"ease")),await Promise.all(_).then(()=>{s.removeClass(e,w),c===u(e)&&(s.css(e,{height:"",alignContent:""}),s.css(i,{opacity:""}),delete e.dataset.transition)})});return s.hasClass(e,v)?T(e).then(p):s.hasClass(e,w)?T(e).then(d).then(p):d().then(p)}function u(o,e){return e&&(o.dataset.transition=1+u(o)),s.toNumber(o.dataset.transition)||0}function T(o){return Promise.all(s.children(o).filter(s.Transition.inProgress).map(e=>new Promise(n=>s.once(e,"transitionend transitioncanceled",n))))}function S(o){return C(s.children(o)).flat().filter(e=>s.isVisible(e))}function z(){return new Promise(o=>requestAnimationFrame(o))}function q(o){return new Promise(e=>setTimeout(e,o))}async function A(o,e,n){await D();let t=s.children(e);const c=t.map(f=>x(f,!0)),a={...s.css(e,["height","padding"]),display:"block"};await Promise.all(t.concat(e).map(s.Transition.cancel)),o(),t=t.concat(s.children(e).filter(f=>!s.includes(t,f))),await Promise.resolve(),s.fastdom.flush();const r=s.attr(e,"style"),h=s.css(e,["height","padding"]),[d,p]=H(e,t,c),l=t.map(f=>({style:s.attr(f,"style")}));t.forEach((f,m)=>p[m]&&s.css(f,p[m])),s.css(e,a),s.trigger(e,"scroll"),s.fastdom.flush(),await D();const i=t.map((f,m)=>s.parent(f)===e&&s.Transition.start(f,d[m],n,"ease")).concat(s.Transition.start(e,h,n,"ease"));try{await Promise.all(i),t.forEach((f,m)=>{s.attr(f,l[m]),s.parent(f)===e&&s.css(f,"display",d[m].opacity===0?"none":"")}),s.attr(e,"style",r)}catch{s.attr(t,"style",""),L(e,a)}}function x(o,e){const n=s.css(o,"zIndex");return s.isVisible(o)?{display:"",opacity:e?s.css(o,"opacity"):"0",pointerEvents:"none",position:"absolute",zIndex:n==="auto"?s.index(o):n,...I(o)}:!1}function H(o,e,n){const t=e.map((a,r)=>s.parent(a)&&r in n?n[r]?s.isVisible(a)?I(a):{opacity:0}:{opacity:s.isVisible(a)?1:0}:!1),c=t.map((a,r)=>{const h=s.parent(e[r])===o&&(n[r]||x(e[r]));if(!h)return!1;if(!a)delete h.opacity;else if(!("opacity"in a)){const{opacity:d}=h;d%1?a.opacity=1:delete h.opacity}return h});return[t,c]}function L(o,e){for(const n in e)s.css(o,n,"")}function I(o){const{height:e,width:n}=s.offset(o);return{height:e,width:n,transform:"",...s.position(o),...s.css(o,["marginTop","marginLeft"])}}function D(){return new Promise(o=>requestAnimationFrame(o))}var M={props:{duration:Number,animation:Boolean},data:{duration:150,animation:"slide"},methods:{animate(o,e=this.$el){const n=this.animation;return(n==="fade"?P:n==="delayed-fade"?(...c)=>P(...c,40):n?A:()=>(o(),Promise.resolve()))(o,e,this.duration).catch(s.noop)}}},V={connected(){s.addClass(this.$el,this.$options.id)}},E={mixins:[V,M],props:{group:String,threshold:Number,clsItem:String,clsPlaceholder:String,clsDrag:String,clsDragState:String,clsBase:String,clsNoDrag:String,clsEmpty:String,clsCustom:String,handle:String},data:{group:!1,threshold:5,clsItem:"uk-sortable-item",clsPlaceholder:"uk-sortable-placeholder",clsDrag:"uk-sortable-drag",clsDragState:"uk-drag",clsBase:"uk-sortable",clsNoDrag:"uk-sortable-nodrag",clsEmpty:"uk-sortable-empty",clsCustom:"",handle:!1,pos:{}},created(){for(const o of["init","start","move","end"]){const e=this[o];this[o]=n=>{s.assign(this.pos,s.getEventPos(n)),e(n)}}},events:{name:s.pointerDown,passive:!1,handler:"init"},computed:{target:(o,e)=>(e.tBodies||[e])[0],items(){return s.children(this.target)},isEmpty(){return s.isEmpty(this.items)},handles({handle:o},e){return o?s.$$(o,e):this.items}},watch:{isEmpty(o){s.toggleClass(this.target,this.clsEmpty,o)},handles(o,e){s.css(e,{touchAction:"",userSelect:""}),s.css(o,{touchAction:s.hasTouch?"none":"",userSelect:"none"})}},update:{write(o){if(!this.drag||!s.parent(this.placeholder))return;const{pos:{x:e,y:n},origin:{offsetTop:t,offsetLeft:c},placeholder:a}=this;s.css(this.drag,{top:n-t,left:e-c});const r=this.getSortable(document.elementFromPoint(e,n));if(!r)return;const{items:h}=r;if(h.some(s.Transition.inProgress))return;const d=G(h,{x:e,y:n});if(h.length&&(!d||d===a))return;const p=this.getSortable(a),l=J(r.target,d,a,e,n,r===p&&o.moved!==d);l!==!1&&(l&&a===l||(r!==p?(p.remove(a),o.moved=d):delete o.moved,r.insert(a,l),this.touched.add(r)))},events:["move"]},methods:{init(o){const{target:e,button:n,defaultPrevented:t}=o,[c]=this.items.filter(a=>a.contains(e));!c||t||n>0||s.isInput(e)||e.closest(`.${this.clsNoDrag}`)||this.handle&&!e.closest(this.handle)||(o.preventDefault(),this.touched=new Set([this]),this.placeholder=c,this.origin={target:e,index:s.index(c),...this.pos},s.on(document,s.pointerMove,this.move),s.on(document,s.pointerUp,this.end),this.threshold||this.start(o))},start(o){this.drag=W(this.$container,this.placeholder);const{left:e,top:n}=this.placeholder.getBoundingClientRect();s.assign(this.origin,{offsetLeft:this.pos.x-e,offsetTop:this.pos.y-n}),s.addClass(this.drag,this.clsDrag,this.clsCustom),s.addClass(this.placeholder,this.clsPlaceholder),s.addClass(this.items,this.clsItem),s.addClass(document.documentElement,this.clsDragState),s.trigger(this.$el,"start",[this,this.placeholder]),j(this.pos),this.move(o)},move(o){this.drag?this.$emit("move"):(Math.abs(this.pos.x-this.origin.x)>this.threshold||Math.abs(this.pos.y-this.origin.y)>this.threshold)&&this.start(o)},end(){if(s.off(document,s.pointerMove,this.move),s.off(document,s.pointerUp,this.end),!this.drag)return;O();const o=this.getSortable(this.placeholder);this===o?this.origin.index!==s.index(this.placeholder)&&s.trigger(this.$el,"moved",[this,this.placeholder]):(s.trigger(o.$el,"added",[o,this.placeholder]),s.trigger(this.$el,"removed",[this,this.placeholder])),s.trigger(this.$el,"stop",[this,this.placeholder]),s.remove(this.drag),this.drag=null;for(const{clsPlaceholder:e,clsItem:n}of this.touched)for(const t of this.touched)s.removeClass(t.items,e,n);this.touched=null,s.removeClass(document.documentElement,this.clsDragState)},insert(o,e){s.addClass(this.items,this.clsItem);const n=()=>e?s.before(e,o):s.append(this.target,o);this.animate(n)},remove(o){this.target.contains(o)&&this.animate(()=>s.remove(o))},getSortable(o){do{const e=this.$getComponent(o,"sortable");if(e&&(e===this||this.group!==!1&&e.group===this.group))return e}while(o=s.parent(o))}}};let $;function j(o){let e=Date.now();$=setInterval(()=>{let{x:n,y:t}=o;t+=document.scrollingElement.scrollTop;const c=(Date.now()-e)*.3;e=Date.now(),s.scrollParents(document.elementFromPoint(n,o.y)).reverse().some(a=>{let{scrollTop:r,scrollHeight:h}=a;const{top:d,bottom:p,height:l}=s.offsetViewport(a);if(d<t&&d+35>t)r-=c;else if(p>t&&p-35<t)r+=c;else return;if(r>0&&r<h-l)return a.scrollTop=r,!0})},15)}function O(){clearInterval($)}function W(o,e){let n;if(s.isTag(e,"li","tr")){n=s.$("<div>"),s.append(n,e.cloneNode(!0).children);for(const t of e.getAttributeNames())s.attr(n,t,e.getAttribute(t))}else n=e.cloneNode(!0);return s.append(o,n),s.css(n,"margin","0","important"),s.css(n,{boxSizing:"border-box",width:e.offsetWidth,height:e.offsetHeight,padding:s.css(e,"padding")}),s.height(n.firstElementChild,s.height(e.firstElementChild)),n}function G(o,e){return o[s.findIndex(o,n=>s.pointInRect(e,n.getBoundingClientRect()))]}function J(o,e,n,t,c,a){if(!s.children(o).length)return;const r=e.getBoundingClientRect();if(!a)return K(o,n)||c<r.top+r.height/2?e:e.nextElementSibling;const h=n.getBoundingClientRect(),d=F([r.top,r.bottom],[h.top,h.bottom]),[p,l,i,f]=d?[t,"width","left","right"]:[c,"height","top","bottom"],m=h[l]<r[l]?r[l]-h[l]:0;return h[i]<r[i]?m&&p<r[i]+m?!1:e.nextElementSibling:m&&p>r[f]-m?!1:e}function K(o,e){const n=s.children(o).length===1;n&&s.append(o,e);const t=s.children(o),c=t.some((a,r)=>{const h=a.getBoundingClientRect();return t.slice(r+1).some(d=>{const p=d.getBoundingClientRect();return!F([h.left,h.right],[p.left,p.right])})});return n&&s.remove(e),c}function F(o,e){return o[1]>e[0]&&e[1]>o[0]}return typeof window<"u"&&window.UIkit&&window.UIkit.component("sortable",E),E});
