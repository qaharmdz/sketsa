/*! UIkit 3.15.10 | https://www.getuikit.com | (c) 2014 - 2022 YOOtheme | MIT License */(function(n,y){typeof exports=="object"&&typeof module<"u"?module.exports=y(require("uikit-util")):typeof define=="function"&&define.amd?define("uikitfilter",["uikit-util"],y):(n=typeof globalThis<"u"?globalThis:n||self,n.UIkitFilter=y(n.UIkit.util))})(this,function(n){"use strict";function y(s){return q(s,"top","bottom")}function q(s,e,t){const o=[[]];for(const c of s){if(!n.isVisible(c))continue;let r=u(c);for(let a=o.length-1;a>=0;a--){const f=o[a];if(!f[0]){f.push(c);break}let h;if(f[0].offsetParent===c.offsetParent?h=u(f[0]):(r=u(c,!0),h=u(f[0],!0)),r[e]>=h[t]-1&&r[e]!==h[e]){o.push([c]);break}if(r[t]-1>h[e]||r[e]===h[e]){f.push(c);break}if(a===0){o.unshift([c]);break}}}return o}function u(s,e){e===void 0&&(e=!1);let{offsetTop:t,offsetLeft:o,offsetHeight:c,offsetWidth:r}=s;return e&&([t,o]=n.offsetPosition(s)),{top:t,left:o,bottom:t+c,right:o+r}}const v="uk-transition-leave",g="uk-transition-enter";function T(s,e,t,o){o===void 0&&(o=0);const c=w(e,!0),r={opacity:1},a={opacity:0},f=m=>()=>c===w(e)?m():Promise.reject(),h=f(async()=>{n.addClass(e,v),await Promise.all(F(e).map((m,l)=>new Promise(d=>setTimeout(()=>n.Transition.start(m,a,t/2,"ease").then(d),l*o)))),n.removeClass(e,v)}),p=f(async()=>{const m=n.height(e);n.addClass(e,g),s(),n.css(n.children(e),{opacity:0}),await A();const l=n.children(e),d=n.height(e);n.css(e,"alignContent","flex-start"),n.height(e,m);const i=F(e);n.css(l,a);const x=i.map(async(R,G)=>{await L(G*o),await n.Transition.start(R,r,t/2,"ease")});m!==d&&x.push(n.Transition.start(e,{height:d},t/2+i.length*o,"ease")),await Promise.all(x).then(()=>{n.removeClass(e,g),c===w(e)&&(n.css(e,{height:"",alignContent:""}),n.css(l,{opacity:""}),delete e.dataset.transition)})});return n.hasClass(e,v)?I(e).then(p):n.hasClass(e,g)?I(e).then(h).then(p):h().then(p)}function w(s,e){return e&&(s.dataset.transition=1+w(s)),n.toNumber(s.dataset.transition)||0}function I(s){return Promise.all(n.children(s).filter(n.Transition.inProgress).map(e=>new Promise(t=>n.once(e,"transitionend transitioncanceled",t))))}function F(s){return y(n.children(s)).reduce((e,t)=>e.concat(n.sortBy(t.filter(o=>n.isInView(o)),"offsetLeft")),[])}function A(){return new Promise(s=>requestAnimationFrame(s))}function L(s){return new Promise(e=>setTimeout(e,s))}async function V(s,e,t){await $();let o=n.children(e);const c=o.map(d=>S(d,!0)),r={...n.css(e,["height","padding"]),display:"block"};await Promise.all(o.concat(e).map(n.Transition.cancel)),s(),o=o.concat(n.children(e).filter(d=>!n.includes(o,d))),await Promise.resolve(),n.fastdom.flush();const a=n.attr(e,"style"),f=n.css(e,["height","padding"]),[h,p]=B(e,o,c),m=o.map(d=>({class:n.attr(d,"class"),style:n.attr(d,"style")}));o.forEach((d,i)=>p[i]&&n.css(d,p[i])),n.css(e,r),await $();const l=o.map((d,i)=>n.parent(d)===e&&n.Transition.start(d,h[i],t,"ease")).concat(n.Transition.start(e,f,t,"ease"));try{await Promise.all(l),o.forEach((d,i)=>{n.attr(d,m[i]),n.parent(d)===e&&n.css(d,"display",h[i].opacity===0?"none":"")}),n.attr(e,"style",a)}catch{n.attr(o,"style",""),N(e,r)}}function S(s,e){const t=n.css(s,"zIndex");return n.isVisible(s)?{display:"",opacity:e?n.css(s,"opacity"):"0",pointerEvents:"none",position:"absolute",zIndex:t==="auto"?n.index(s):t,...P(s)}:!1}function B(s,e,t){const o=e.map((r,a)=>n.parent(r)&&a in t?t[a]?n.isVisible(r)?P(r):{opacity:0}:{opacity:n.isVisible(r)?1:0}:!1),c=o.map((r,a)=>{const f=n.parent(e[a])===s&&(t[a]||S(e[a]));if(!f)return!1;if(!r)delete f.opacity;else if(!("opacity"in r)){const{opacity:h}=f;h%1?r.opacity=1:delete f.opacity}return f});return[o,c]}function N(s,e){for(const t in e)n.css(s,t,"")}function P(s){const{height:e,width:t}=n.offset(s);return{height:e,width:t,transform:"",...n.position(s),...n.css(s,["marginTop","marginLeft"])}}function $(){return new Promise(s=>requestAnimationFrame(s))}var O={props:{duration:Number,animation:Boolean},data:{duration:150,animation:"slide"},methods:{animate(s,e){e===void 0&&(e=this.$el);const t=this.animation;return(t==="fade"?T:t==="delayed-fade"?function(){for(var c=arguments.length,r=new Array(c),a=0;a<c;a++)r[a]=arguments[a];return T(...r,40)}:t?V:()=>(s(),Promise.resolve()))(s,e,this.duration).catch(n.noop)}}},b={mixins:[O],args:"target",props:{target:Boolean,selActive:Boolean},data:{target:null,selActive:!1,attrItem:"uk-filter-control",cls:"uk-active",duration:250},computed:{toggles:{get(s,e){let{attrItem:t}=s;return n.$$("["+t+"],[data-"+t+"]",e)},watch(){if(this.updateState(),this.selActive!==!1){const s=n.$$(this.selActive,this.$el);this.toggles.forEach(e=>n.toggleClass(e,this.cls,n.includes(s,e)))}},immediate:!0},children:{get(s,e){let{target:t}=s;return n.$$(t+" > *",e)},watch(s,e){e&&!D(s,e)&&this.updateState()},immediate:!0}},events:[{name:"click",delegate(){return"["+this.attrItem+"],[data-"+this.attrItem+"]"},handler(s){s.preventDefault(),this.apply(s.current)}}],methods:{apply(s){const e=this.getState(),t=E(s,this.attrItem,this.getState());z(e,t)||this.setState(t)},getState(){return this.toggles.filter(s=>n.hasClass(s,this.cls)).reduce((s,e)=>E(e,this.attrItem,s),{filter:{"":""},sort:[]})},async setState(s,e){e===void 0&&(e=!0),s={filter:{"":""},sort:[],...s},n.trigger(this.$el,"beforeFilter",[this,s]),this.toggles.forEach(t=>n.toggleClass(t,this.cls,!!j(t,this.attrItem,s))),await Promise.all(n.$$(this.target,this.$el).map(t=>{const o=()=>{H(s,t,n.children(t)),this.$update(this.$el)};return e?this.animate(o,t):o()})),n.trigger(this.$el,"afterFilter",[this])},updateState(){n.fastdom.write(()=>this.setState(this.getState(),!1))}}};function C(s,e){return n.parseOptions(n.data(s,e),["filter"])}function z(s,e){return["filter","sort"].every(t=>n.isEqual(s[t],e[t]))}function H(s,e,t){const o=W(s);t.forEach(a=>n.css(a,"display",o&&!n.matches(a,o)?"none":""));const[c,r]=s.sort;if(c){const a=M(t,c,r);n.isEqual(a,t)||n.append(e,a)}}function E(s,e,t){const{filter:o,group:c,sort:r,order:a="asc"}=C(s,e);return(o||n.isUndefined(r))&&(c?o?(delete t.filter[""],t.filter[c]=o):(delete t.filter[c],(n.isEmpty(t.filter)||""in t.filter)&&(t.filter={"":o||""})):t.filter={"":o||""}),n.isUndefined(r)||(t.sort=[r,a]),t}function j(s,e,t){let{filter:o={"":""},sort:[c,r]}=t;const{filter:a="",group:f="",sort:h,order:p="asc"}=C(s,e);return n.isUndefined(h)?f in o&&a===o[f]||!a&&f&&!(f in o)&&!o[""]:c===h&&r===p}function D(s,e){return s.length===e.length&&s.every(t=>e.includes(t))}function W(s){let{filter:e}=s,t="";return n.each(e,o=>t+=o||""),t}function M(s,e,t){return[...s].sort((o,c)=>n.data(o,e).localeCompare(n.data(c,e),void 0,{numeric:!0})*(t==="asc"||-1))}return typeof window<"u"&&window.UIkit&&window.UIkit.component("filter",b),b});
