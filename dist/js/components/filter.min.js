/*! UIkit 3.17.11 | https://www.getuikit.com | (c) 2014 - 2024 YOOtheme | MIT License */(function(s,u){typeof exports=="object"&&typeof module<"u"?module.exports=u(require("uikit-util")):typeof define=="function"&&define.amd?define("uikitfilter",["uikit-util"],u):(s=typeof globalThis<"u"?globalThis:s||self,s.UIkitFilter=u(s.UIkit.util))})(this,function(s){"use strict";function u(e,n=[]){try{return e?s.startsWith(e,"{")?JSON.parse(e):n.length&&!s.includes(e,":")?{[n[0]]:e}:e.split(";").reduce((o,t)=>{const[a,r]=t.split(/:(.*)/);return a&&!s.isUndefined(r)&&(o[a.trim()]=r.trim()),o},{}):{}}catch{return{}}}function A(e,n="update"){e._connected&&e._updates.length&&(e._queued||(e._queued=new Set,s.fastdom.read(()=>{e._connected&&O(e,e._queued),delete e._queued})),e._queued.add(n.type||n))}function O(e,n){for(const{read:o,write:t,events:a=[]}of e._updates){if(!n.has("update")&&!a.some(c=>n.has(c)))continue;let r;o&&(r=o.call(e,e._data,n),r&&s.isPlainObject(r)&&s.assign(e._data,r)),t&&r!==!1&&s.fastdom.write(()=>{e._connected&&t.call(e,e._data,n)})}}function z(e){return v(s.observeResize,e,"resize")}function N(e){return v(s.observeMutation,e)}function v(e,n,o){return{observe:e,handler(){A(this,o)},...n}}N({options:{childList:!0,attributes:!0,attributeFilter:["style"]}}),z({target:({$el:e})=>[e,...s.children(e)]});function P(e){const n=[[]],o=e.some((t,a)=>a&&e[a-1].offsetParent!==t.offsetParent);for(const t of e){if(!s.isVisible(t))continue;const a=g(t,o);for(let r=n.length-1;r>=0;r--){const c=n[r];if(!c[0]){c.push(t);break}const d=g(c[0],o);if(a.top>=d.bottom-1&&a.top!==d.top){n.push([t]);break}if(a.bottom-1>d.top||a.top===d.top){let h=c.length-1;for(;h>=0;h--){const m=g(c[h],o);if(a.left>=m.left)break}c.splice(h+1,0,t);break}if(r===0){n.unshift([t]);break}}}return n}function g(e,n=!1){let{offsetTop:o,offsetLeft:t,offsetHeight:a,offsetWidth:r}=e;return n&&([o,t]=s.offsetPosition(e)),{top:o,left:t,bottom:o+a,right:t+r}}const w="uk-transition-leave",b="uk-transition-enter";function T(e,n,o,t=0){const a=y(n,!0),r={opacity:1},c={opacity:0},d=l=>()=>a===y(n)?l():Promise.reject(),h=d(async()=>{s.addClass(n,w),await Promise.all(S(n).map((l,i)=>new Promise(f=>setTimeout(()=>s.Transition.start(l,c,o/2,"ease").then(f),i*t)))),s.removeClass(n,w)}),m=d(async()=>{const l=s.height(n);s.addClass(n,b),e(),s.css(s.children(n),{opacity:0}),await B();const i=s.children(n),f=s.height(n);s.css(n,"alignContent","flex-start"),s.height(n,l);const p=S(n);s.css(i,c);const x=p.map(async(X,Y)=>{await H(Y*t),await s.Transition.start(X,r,o/2,"ease")});l!==f&&x.push(s.Transition.start(n,{height:f},o/2+p.length*t,"ease")),await Promise.all(x).then(()=>{s.removeClass(n,b),a===y(n)&&(s.css(n,{height:"",alignContent:""}),s.css(i,{opacity:""}),delete n.dataset.transition)})});return s.hasClass(n,w)?C(n).then(m):s.hasClass(n,b)?C(n).then(h).then(m):h().then(m)}function y(e,n){return n&&(e.dataset.transition=1+y(e)),s.toNumber(e.dataset.transition)||0}function C(e){return Promise.all(s.children(e).filter(s.Transition.inProgress).map(n=>new Promise(o=>s.once(n,"transitionend transitioncanceled",o))))}function S(e){return P(s.children(e)).flat().filter(n=>s.isVisible(n))}function B(){return new Promise(e=>requestAnimationFrame(e))}function H(e){return new Promise(n=>setTimeout(n,e))}async function L(e,n,o){await F();let t=s.children(n);const a=t.map(f=>$(f,!0)),r={...s.css(n,["height","padding"]),display:"block"};await Promise.all(t.concat(n).map(s.Transition.cancel)),e(),t=t.concat(s.children(n).filter(f=>!s.includes(t,f))),await Promise.resolve(),s.fastdom.flush();const c=s.attr(n,"style"),d=s.css(n,["height","padding"]),[h,m]=V(n,t,a),l=t.map(f=>({style:s.attr(f,"style")}));t.forEach((f,p)=>m[p]&&s.css(f,m[p])),s.css(n,r),s.trigger(n,"scroll"),s.fastdom.flush(),await F();const i=t.map((f,p)=>s.parent(f)===n&&s.Transition.start(f,h[p],o,"ease")).concat(s.Transition.start(n,d,o,"ease"));try{await Promise.all(i),t.forEach((f,p)=>{s.attr(f,l[p]),s.parent(f)===n&&s.css(f,"display",h[p].opacity===0?"none":"")}),s.attr(n,"style",c)}catch{s.attr(t,"style",""),j(n,r)}}function $(e,n){const o=s.css(e,"zIndex");return s.isVisible(e)?{display:"",opacity:n?s.css(e,"opacity"):"0",pointerEvents:"none",position:"absolute",zIndex:o==="auto"?s.index(e):o,...I(e)}:!1}function V(e,n,o){const t=n.map((r,c)=>s.parent(r)&&c in o?o[c]?s.isVisible(r)?I(r):{opacity:0}:{opacity:s.isVisible(r)?1:0}:!1),a=t.map((r,c)=>{const d=s.parent(n[c])===e&&(o[c]||$(n[c]));if(!d)return!1;if(!r)delete d.opacity;else if(!("opacity"in r)){const{opacity:h}=d;h%1?r.opacity=1:delete d.opacity}return d});return[t,a]}function j(e,n){for(const o in n)s.css(e,o,"")}function I(e){const{height:n,width:o}=s.offset(e);return{height:n,width:o,transform:"",...s.position(e),...s.css(e,["marginTop","marginLeft"])}}function F(){return new Promise(e=>requestAnimationFrame(e))}var M={props:{duration:Number,animation:Boolean},data:{duration:150,animation:"slide"},methods:{animate(e,n=this.$el){const o=this.animation;return(o==="fade"?T:o==="delayed-fade"?(...a)=>T(...a,40):o?L:()=>(e(),Promise.resolve()))(e,n,this.duration).catch(s.noop)}}};const R={TAB:9,ESC:27,SPACE:32,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40};var E={mixins:[M],args:"target",props:{target:String,selActive:Boolean},data:{target:"",selActive:!1,attrItem:"uk-filter-control",cls:"uk-active",duration:250},computed:{children:({target:e},n)=>s.$$(`${e} > *`,n),toggles:({attrItem:e},n)=>s.$$(`[${e}],[data-${e}]`,n)},watch:{toggles(e){this.updateState();const n=s.$$(this.selActive,this.$el);for(const o of e){this.selActive!==!1&&s.toggleClass(o,this.cls,s.includes(n,o));const t=Q(o);s.isTag(t,"a")&&s.attr(t,"role","button")}},children(e,n){n&&this.updateState()}},events:{name:"click keydown",delegate(){return`[${this.attrItem}],[data-${this.attrItem}]`},handler(e){e.type==="keydown"&&e.keyCode!==R.SPACE||e.target.closest("a,button")&&(e.preventDefault(),this.apply(e.current))}},methods:{apply(e){const n=this.getState(),o=q(e,this.attrItem,this.getState());W(n,o)||this.setState(o)},getState(){return this.toggles.filter(e=>s.hasClass(e,this.cls)).reduce((e,n)=>q(n,this.attrItem,e),{filter:{"":""},sort:[]})},async setState(e,n=!0){e={filter:{"":""},sort:[],...e},s.trigger(this.$el,"beforeFilter",[this,e]);for(const o of this.toggles)s.toggleClass(o,this.cls,G(o,this.attrItem,e));await Promise.all(s.$$(this.target,this.$el).map(o=>{const t=()=>{D(e,o,s.children(o)),this.$update(this.$el)};return n?this.animate(t,o):t()})),s.trigger(this.$el,"afterFilter",[this])},updateState(){s.fastdom.write(()=>this.setState(this.getState(),!1))}}};function _(e,n){return u(s.data(e,n),["filter"])}function W(e,n){return["filter","sort"].every(o=>s.isEqual(e[o],n[o]))}function D(e,n,o){const t=J(e);o.forEach(c=>s.css(c,"display",t&&!s.matches(c,t)?"none":""));const[a,r]=e.sort;if(a){const c=K(o,a,r);s.isEqual(c,o)||s.append(n,c)}}function q(e,n,o){const{filter:t,group:a,sort:r,order:c="asc"}=_(e,n);return(t||s.isUndefined(r))&&(a?t?(delete o.filter[""],o.filter[a]=t):(delete o.filter[a],(s.isEmpty(o.filter)||""in o.filter)&&(o.filter={"":t||""})):o.filter={"":t||""}),s.isUndefined(r)||(o.sort=[r,c]),o}function G(e,n,{filter:o={"":""},sort:[t,a]}){const{filter:r="",group:c="",sort:d,order:h="asc"}=_(e,n);return s.isUndefined(d)?c in o&&r===o[c]||!r&&c&&!(c in o)&&!o[""]:t===d&&a===h}function J({filter:e}){let n="";return s.each(e,o=>n+=o||""),n}function K(e,n,o){return[...e].sort((t,a)=>s.data(t,n).localeCompare(s.data(a,n),void 0,{numeric:!0})*(o==="asc"||-1))}function Q(e){return s.$("a,button",e)||e}return typeof window<"u"&&window.UIkit&&window.UIkit.component("filter",E),E});
